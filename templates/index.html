{% extends "base.html" %}
{% load static %}
{% load humanize %}
{% block content %}
    {% if user.player.isActivated and not user.player.inDiscord %}
        <div style="text-align:center">
            <h3>! Discord ã‚µãƒ¼ãƒãƒ¼å‚åŠ ã¸ã®ãŠé¡˜ã„ !</h3>
            <p>
                ã‚ãªãŸã¯ã¾ã  JBSL ã® Discord ã‚µãƒ¼ãƒãƒ¼ã«å‚åŠ ã—ã¦ã„ã¾ã›ã‚“ã€‚
            </p>
            <p>
                ä»¥ä¸‹ã®ãƒªãƒ³ã‚¯ã‹ã‚‰å‚åŠ ãŠé¡˜ã„ã—ã¾ã™ã€‚
            </p>
            <p>
                <span class="dl_link"><a href="https://discord.gg/CqQ6ZD8KRn">å‚åŠ </a></span>
            </p>
        </div>
    {% endif %}
    {% for league in invitations %}
        <div style="text-align:center">
            <h3>
                ! ãƒªãƒ¼ã‚° <span style="color:{{ league.color }}">{{ league }}</span> ã‹ã‚‰æ‹›å¾…ãŒå±Šã„ã¦ã„ã¾ã™ !
                <form method="post">
                    {% csrf_token %}
                    <button class="btn" type="submit" name="join" value="{{ league.pk }}">å‚åŠ </button>
                    <button class="danger"
                            style="transform:scale(0.7);"
                            type="submit"
                            name="decline"
                            value="{{ league.pk }}">æ‹’å¦</button>
                </form>
            </h3>
        </div>
    {% endfor %}
    {% if not user.is_authenticated %}
        <h3>å‚åŠ æ–¹æ³•</h3>
        <ul>
            <li>å³ä¸Šã®ã€ŒDiscord èªè¨¼ã€ã‹ã‚‰ä»®ç™»éŒ²ã‚’å®Œäº†ã—ã¦ãã ã•ã„ã€‚</li>
            <li>ç™»éŒ²ã«ã¯ Discord ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒå¿…è¦ã¨ãªã‚Šã¾ã™ã€‚</li>
            <li>
                Discord èªè¨¼æ™‚ã€<u>æœ€åˆã® 1 å›ã¯ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹ã‚ˆã†ã§ã™ã€‚</u>ï¼ˆåŸå› ä¸æ˜ã§ã™ã€‚ã™ã„ã¾ã›ã‚“ï¼‰
            </li>
            <li>ãã®å ´åˆã€ãƒ–ãƒ©ã‚¦ã‚¶ã®ã€Œæˆ»ã‚‹ã€ãƒœã‚¿ãƒ³ã‚’ä½¿ã£ã¦ãƒªãƒˆãƒ©ã‚¤ãŠé¡˜ã„ã—ã¾ã™ã€‚</li>
            <li>ä»®ç™»éŒ²å¾Œã€ScoreSaber ã®IDã‚’è¨­å®šã™ã‚‹ã“ã¨ã«ã‚ˆã‚Šã€æœ¬ç™»éŒ²ã¨ãªã‚Šã¾ã™ã€‚</li>
            <li>
                ç™»éŒ²ã§ãã‚‹ã®ã¯<u>æ—¥æœ¬äººãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ã¿</u>ã¨ãªã‚Šã¾ã™ã€‚Sorry, only Japanese players can be registered.
            </li>
        </ul>
    {% endif %}
    <h3>J3 æœ¬æˆ¦çµæœ</h3>
    <div style="text-align:center">
    <iframe src="https://challonge.com/ja/ri88bhif/module" width="100%" height="500" frameborder="0" scrolling="auto" allowtransparency="true"></iframe>
    <p>ğŸ…<span style="color:gold">å„ªå‹</span> : Ge2Toro ã•ã‚“</p>
    <p>ğŸ¥ˆ2ä½ : Lumi_Astraea ã•ã‚“</p>
    <p>ğŸ¥‰<span stlye="color:brown">3ä½</span> : FFF(ã‚¨ãƒ•3)th ã•ã‚“</p>
    <p>ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼</p>
    </div>
    <h3>Headlines</h3>
    {% for headline in headlines %}
        <ul>
            <li>
                {% if headline.player != None %}
                    <a href="{% url 'app:userpage' sid=headline.player.sid %}">
                        <img src="{{ headline.player.imageURL }}" class="icon" />
                    </a> {{ headline.text }} ï¼ˆ{{ headline.time }}ï¼‰
                {% else %}
                    {{ headline.text }}
                {% endif %}
            </li>
        </ul>
    {% endfor %}
    <p>
        <a href="{% url 'app:headlines' page=1 %}">...More Headlines</a>
    </p>
    <h3>Live Leagues</h3>
    <table class="table table-striped table-borderless"
           style="background-color:gray">
        <thead>
            <th>Cover</th>
            <th>Title</th>
            <th>Description</th>
            <th>Limit</th>
            <th>Owner</th>
            <th>End</th>
            <th>1st</th>
            <th>2nd</th>
            <th>3rd</th>
        </thead>
        {% for league in active_leagues %}
            <tr style="background-color:{{ league.color }}">
                <td>
                    <a href={% url 'app:leaderboard' pk=league.pk %}>
                        <img class="thumb" src=" {{ league.playlist.image }}" />
                    </a>
                </td>
                <td>{{ league.name }}</td>
                <td>{{ league.description|truncatechars:50 }}</td>
                <td>
                    {% if league.isPublic %}
                        {% if league.limit == 2000 %}
                            ä¸Šé™ãªã—
                        {% else %}
                            {{ league.limit }}
                        {% endif %}
                    {% else %}
                        Private
                    {% endif %}
                </td>
                <td>
                    <a href
                       {% url 'app:userpage' sid=league.owner.sid %}
                       style="color:black">{{ league.owner.name }}</a>
                </td>
                <td>{{ league.end }}</td>
                <td>
                    {% if league.first != None %}
                        <a href="{% url 'app:userpage' sid=league.first.sid %}"
                           style="color:black">
                            {% with league.first as player %}
                                <img class="icon" src={{ player.imageURL }}>
                                <br>
                                {% if player.isSupporter %}
                                    <span style="color:{{ player.userColor }}; font-weight:bold; {% if player.isShadow %}filter: drop-shadow(0 0 3px {{ player.bgColor }});{% endif %} ">{{ player.name }}</span>
                                {% else %}
                                    {{ player.name }}
                                {% endif %}
                            {% endwith %}
                        </a>
                    {% endif %}
                </td>
                <td>
                    {% if league.second != None %}
                        <a href="{% url 'app:userpage' sid=league.second.sid %}"
                           style="color:black">
                            {% with league.second as player %}
                                <img class="icon" src={{ player.imageURL }}>
                                <br>
                                {% if player.isSupporter %}
                                    <span style="color:{{ player.userColor }}; font-weight:bold; {% if player.isShadow %}filter: drop-shadow(0 0 3px {{ player.bgColor }});{% endif %} ">{{ player.name }}</span>
                                {% else %}
                                    {{ player.name }}
                                {% endif %}
                            {% endwith %}
                        </a>
                    {% endif %}
                </td>
                <td>
                    {% if league.third != None %}
                        <a href="{% url 'app:userpage' sid=league.third.sid %}"
                           style="color:black">
                            {% with league.third as player %}
                                <img class="icon" src={{ player.imageURL }}>
                                <br>
                                {% if player.isSupporter %}
                                    <span style="color:{{ player.userColor }}; font-weight:bold; {% if player.isShadow %}filter: drop-shadow(0 0 3px {{ player.bgColor }});{% endif %} ">{{ player.name }}</span>
                                {% else %}
                                    {{ player.name }}
                                {% endif %}
                            {% endwith %}
                        </a>
                    {% endif %}
                </td>
            </tr>
        {% endfor %}
    </table>
    <h3>
        JBSL3 é–‹å‚¬ä¸­ç‰¹åˆ¥ä¼ç”»ï½æ°—ã«ãªã‚‹ãƒ©ã‚¤ãƒãƒ«é–¢ä¿‚ï½
    </h3>
    <p>
        ä¸¡æƒ³ã„ï¼ˆãŠäº’ã„ãƒ©ã‚¤ãƒãƒ«é–¢ä¿‚ï¼‰ã¯ <span style="font-size:30px">{{ love_pair }}</span> çµ„ã„ã‚‹ã‚ˆã†ã§ã™ã€‚
    </p>
    <p>
        æœ€ã‚‚ãƒ©ã‚¤ãƒãƒ«è¦–ã•ã‚Œã¦ã„ã‚‹äººã¯
    </p>
    <ul>
        {% for player in love_sort %}
            <li>
                <img class="icon" src={{ player.imageURL }}>{{ player }} ã•ã‚“
            </li>
        {% endfor %}
    </ul>
    <p>
        {{ love_max }} äººã‹ã‚‰ç†±ã„è¦–ç·šã‚’å‘ã‘ã‚‰ã‚Œã¦ã„ã‚‹â€¦â€¦
    </p>
{% endblock %}
