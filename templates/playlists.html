{% extends "base.html" %}
{% block content %}
    {% if user.is_authenticated %}
        <p style="text-align:right">
            <button class="btn" onclick="location.href='{% url 'app:create_playlist' %}'">Êñ∞Ë¶è‰ΩúÊàê</button>
        </p>
    {% endif %}
    <table class="table table-striped table-borderless">
        <thead>
            <th style="width:64px">Cover</th>
            <th>Title</th>
            <th>Description</th>
            <th>Editor</th>
            <th>Editable</th>
            <th>Songs</th>
        </thead>
        {% for playlist in playlists %}
            <tr>
                <td>
                    <a href={% url 'app:playlist' title=playlist.title %}>
                        <img class="thumb" src="data:image/png;{{ playlist.image }}" />
                    </a>
                </td>
                <td>
                    <p>
                        {{ playlist.title }}
                    </p>
                    <p>
                        <a href="{% url 'app:download_playlist' title=playlist.title %}"
                           download="{{ playlist.title }}.json">
                            <span class="dl_link">„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ</span>
                        </a>
                    </p>
                </td>
                <td>{{ playlist.description |truncatechars:50 }}</td>
                <td>
                    <img class="icon" src="{{ playlist.editor.imageURL }}" />
                </td>
                <td>
                    {% if playlist.isEditable %}
                        üìù
                    {% else %}
                        üîê
                    {% endif %}
                </td>
                <td>
                    <ul>
                        {% for song in playlist.songs.all|slice:":4" %}
                            <li>{{ song.title | truncatechars:40 }} ({{ song.diff }}) by {{ song.author }}</li>
                        {% endfor %}
                        {% if playlist.songs.all|length > 4 %}...{% endif %}
                    </ul>
                </td>
            </tr>
        {% endfor %}
    </table>
{% endblock content %}
